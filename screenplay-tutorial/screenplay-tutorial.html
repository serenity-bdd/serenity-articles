<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="keywords" content="serenity-bdd, web testing, screenplay pattern">
<meta name="author" content="John Ferguson Smart">
<title>Writing automated acceptance tests using Serenity and the Screenplay Pattern</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article">
<div id="header">
<h1>Writing automated acceptance tests using Serenity and the Screenplay Pattern</h1>
<div class="details">
<span id="author" class="author">John Ferguson Smart</span><br>
<span id="email" class="email"><a href="mailto:john.smart@wakaleo.com">john.smart@wakaleo.com</a></span><br>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction"><a class="anchor" href="#_introduction"></a>1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Screenplay Pattern is a powerful and elegant approach to designing and implementing automated tests, providing a number of improvements over more traditional approaches such as the Page Objects model. The Screenplay Pattern uses good software engineering principles such as the Single Responsibility Principle, the Open-Closed Principle, favours composition over inheritance, employs thinking from Domain Driven Design to reflect the domain of performing acceptance tests and steers you towards effective use of layers of abstraction. It encourages good testing habits and well-designed test suites that are easy to read, easy to maintain and easy to extend, enabling teams to write more robust and more reliable automated tests more effectively.</p>
</div>
<div class="paragraph">
<p>You can find some details about the origins of the Screenplay Pattern <a href="https://ideas.riverglide.com/page-objects-refactored-12ec3541990#.ekkiguobe">in this article</a>.</p>
</div>
<div class="paragraph">
<p>In this tutorial, you will discover just how easy it is to get productive quickly with Serenity and the Screenplay pattern. We will introduce the core concepts behind the Screenplay pattern and how it is implemented in Serenity along the way.</p>
</div>
<div class="paragraph">
<p>This tutorial assumes some familiarity with Java and Java IDEs, and a passing familiarity with Maven or Gradle. You can get started either by using the Maven archetype, or by downloading the project from <strong>TODO: Add download link</strong>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a>2. Getting started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create a project skeleton using the Maven Archetype Plugin. To do this, run the <code>mvn archetype:generate</code> command (with a filter to reduce the number of artifacts Maven proposes) as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn archetype:generate -Dfilter=screenplay
...
[INFO] No archetype defined. Using maven-archetype-quickstart (org.apache.maven.archetypes:maven-archetype-quickstart:1.0)
Choose archetype:
1: remote -&gt; net.serenity-bdd:serenity-junit-screenplay-archetype (Serenity automated acceptance testing project using Screenplay, Selenium 2 and JUnit)
Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): :</pre>
</div>
</div>
<div class="paragraph">
<p>This will (after downloading list all of the available Serenity screenplay archetypes. For this tutorial, we will be working with JUnit, so enter the number corresponding to the <code>net.serenity-bdd:serenity-junit-screenplay-archetype</code> entry ("1" in the example shown here).</p>
</div>
<div class="paragraph">
<p>You will then be prompted to enter a groupId, artifactId, and version for your project, and a root package for your classes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Choose a number or apply filter (format: [groupId:]artifactId, case sensitive contains): : 1
Define value for property 'groupId': : net.serenitybdd.tutorials
Define value for property 'artifactId': : todomvctests
Define value for property 'version':  1.0-SNAPSHOT: : 1.0.0-SNAPSHOT
Define value for property 'package':  net.serenitybdd.tutorials: :
Confirm properties configuration:
groupId: net.serenitybdd.tutorials
artifactId: todomvctests
version: 1.0.0-SNAPSHOT
package: net.serenitybdd.tutorials
 Y: : Y</pre>
</div>
</div>
<div class="paragraph">
<p>Maven will now generate a project skeleton for you:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Y: : Y
[INFO] ----------------------------------------------------------------------------
[INFO] Using following parameters for creating project from Archetype: serenity-junit-screenplay-archetype:1.1.19
[INFO] ----------------------------------------------------------------------------
[INFO] Parameter: groupId, Value: net.serenitybdd.tutorials
[INFO] Parameter: artifactId, Value: todomvctests
[INFO] Parameter: version, Value: 1.0.0-SNAPSHOT
[INFO] Parameter: package, Value: net.serenitybdd.tutorials
[INFO] Parameter: packageInPathFormat, Value: net/serenitybdd/tutorials
[INFO] Parameter: package, Value: net.serenitybdd.tutorials
[INFO] Parameter: version, Value: 1.0.0-SNAPSHOT
[INFO] Parameter: groupId, Value: net.serenitybdd.tutorials
[INFO] Parameter: artifactId, Value: todomvctests
[INFO] project created from Archetype in dir: /Users/john/Projects/OpenSource/serenity/serenity-articles/screenplay-tutorial/sample-code/screenplay-tutorial
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 04:52 min
[INFO] Finished at: 2016-02-15T09:16:05+00:00
[INFO] Final Memory: 16M/309M
[INFO] ------------------------------------------------------------------------</pre>
</div>
</div>
<div class="paragraph">
<p>You will find your new project in the <code>screenplay-tutorial</code> directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ cd screenplay-tutorial
$ mvn clean verify</pre>
</div>
</div>
<div class="paragraph">
<p>Or, if you prefer Gradle, run the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ gradle test aggregate</pre>
</div>
</div>
<div class="paragraph">
<p>Both will run a simple test performing a search on Google and generate some reports in the <code>target/site/serenity</code> directory. Open the <code>index.html</code> file in this directory to take a look.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_serenity_screenplay_a_quick_tour"><a class="anchor" href="#_serenity_screenplay_a_quick_tour"></a>3. Serenity Screenplay - a quick tour</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we write some tests, let&#8217;s take a quick look at the sample code. Import the project you just created and take a look at the <code>SearchByKeywordStory.java</code> class. This should look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(SerenityRunner.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">SearchByKeywordStory</span> {

    Actor anna = Actor.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">Anna</span><span class="delimiter">&quot;</span></span>);                                                   <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Managed</span>(uniqueSession = <span class="predefined-constant">true</span>)
    <span class="directive">public</span> WebDriver herBrowser;

    <span class="annotation">@Steps</span>
    OpenTheApplication openTheApplication;

    <span class="annotation">@Before</span>
    <span class="directive">public</span> <span class="type">void</span> annaCanBrowseTheWeb() {
        anna.can(BrowseTheWeb.with(herBrowser));                                        <i class="conum" data-value="2"></i><b>(2)</b>
    }

    <span class="annotation">@Test</span>
    <span class="directive">public</span> <span class="type">void</span> search_results_should_show_the_search_term_in_the_title() {

        givenThat(anna).wasAbleTo(openTheApplication);

        when(anna).attemptsTo(Search.forTheTerm(<span class="string"><span class="delimiter">&quot;</span><span class="content">BDD In Action</span><span class="delimiter">&quot;</span></span>));                      <i class="conum" data-value="3"></i><b>(3)</b>

        then(anna).should(eventually(seeThat(TheWebPage.title(),                        <i class="conum" data-value="4"></i><b>(4)</b>
                                     containsString(<span class="string"><span class="delimiter">&quot;</span><span class="content">BDD In Action</span><span class="delimiter">&quot;</span></span>))));

    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Anna is the main actor in our scenario</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Anna can access the application via a web browser</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Actor can perform tasks, such as searching for a particular term</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Actors can check the state of the application, for example by checking what the page title should display.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s go through this test to get an idea of how a typical Serenity Screenplay test is built. Screenplay tests are expressed from the point of view of one or more <em>actors</em>. Actors have <em>abilities</em>, such as the ability to <em>browse the web</em> using a browser. Actors perform business-focused <em>tasks</em> to achieve their goals, such as "Search for a term". Actors can also ask <em>questions</em> about the state of the application, such as checking the state of the result screen.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/screenplay.png" alt="screenplay">
</div>
<div class="title">Figure 1. The Screenplay pattern is built around Actors who use their Abilities to perform Tasks and ask Questions about the state of the system in order to achieve their business goals.</div>
</div>
<div class="paragraph">
<p>Now that you&#8217;ve seen what a typical Screenplay test looks like, lets see just how easy they are to write.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_your_first_serenity_screenplay_test"><a class="anchor" href="#_your_first_serenity_screenplay_test"></a>4. Your first Serenity Screenplay test</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Serenity Screenplay adds a highly readable DSL to structure and express your tests in terms of business tasks. We are going to write some acceptance tests for the Dojo implementation of the TodoMVC application (see <a href="http://todomvc.com/examples/dojo/" class="bare">http://todomvc.com/examples/dojo/</a> ).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/todomvc.png" alt="todomvc">
</div>
<div class="title">Figure 2. The TodoMVN application</div>
</div>
<div class="paragraph">
<p>The first test we will write will simply check that when you add a new todo item to the list, then it appears in the list.</p>
</div>
<div class="paragraph">
<p>Start off by creating a new package called <code>record_items</code> under the <code>features</code> package. This will represent the application <em>capability</em> to record todo items. Inside this package, create a new test class called <code>AddItemsStory</code> like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@RunWith</span>(SerenityRunner.class)                  <i class="conum" data-value="1"></i><b>(1)</b>
<span class="directive">public</span> <span class="type">class</span> <span class="class">AddItemsStory</span> {
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Tells JUnit that this is a Serenity test</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, we will add an actor to our scenario. We&#8217;ll call our actor Justin. Add the following line to your class to cast Justin as an actor in our scenario:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Actor justin = Actor.named(<span class="string"><span class="delimiter">&quot;</span><span class="content">Justin</span><span class="delimiter">&quot;</span></span>);       <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Cast a new actor in the scenario called Justin.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now in this scenario we are testing a web application, so we need to give Justin a browser to use. (Other tests might need other abilities, such as the ability to query a web service or a database). Serenity manages the WebDriver lifecycle for us - all we need to do is to declare a variable for the browser in the test, and assign it to our actor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Managed</span>
<span class="directive">public</span> WebDriver hisBrowser;                        <i class="conum" data-value="1"></i><b>(1)</b>

<span class="annotation">@Before</span>
<span class="directive">public</span> <span class="type">void</span> justinCanBrowseTheWeb() {
    justin.can(BrowseTheWeb.with(hisBrowser));      <i class="conum" data-value="2"></i><b>(2)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This WebDriver instance will be automatically instantiated and shut down by Serenity</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Whenever Justin accesses the web, he will use this browser</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now we can write our first test. The aim of the test is to add a new item to the todo list, and verify that it appears in the list of items below. So we could write something like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> should_be_able_to_add_an_item_to_the_todo_list() {

    givenThat(justin).wasAbleTo(StartWith.anEmptyTodoList());

    when(justin).attemptsTo(AddATodoItem.called(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>));

    then(justin).should(seeThat(TheTodoItems.displayed(), hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is certainly easy enough to read, but the most important classes ( <code>StartWith</code>, <code>AddATodoItem</code>, and <code>TheTodoItems</code>) exist for now only in our imagination. In fact, we are "writing the code we would like to have", and then implementing the classes for the tasks that we don&#8217;t already have. Fortunately, filling in the gaps is not difficult, and after a little practice, it becomes very natural. Let&#8217;s break this code down a little.</p>
</div>
<div class="sect2">
<h3 id="_given_when_then"><a class="anchor" href="#_given_when_then"></a>4.1. Given/When/Then</h3>
<div class="paragraph">
<p>The code shown here uses words like "given", "when" and "then" to make the intent of the test more obvious. The <code>givenThat()</code>, <code>when()</code> and <code>then()</code> are static methods imported from the <code>net.serenitybdd.screenplay.GivenWhenThen</code> class. If your IDE doesn&#8217;t take care of this automatically for you, you can add the imports by hand as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">net.serenitybdd.screenplay.GivenWhenThen.givenThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">net.serenitybdd.screenplay.GivenWhenThen.seeThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">net.serenitybdd.screenplay.GivenWhenThen.when</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">net.serenitybdd.screenplay.GivenWhenThen.then</span>;</code></pre>
</div>
</div>
<div class="paragraph">
<p>These methods are actually optional, and in some cases it makes sense to omit them entirely. For example, you can also write the second line shown above like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">justin.attemptsTo(AddATodoItem.called(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_business_tasks"><a class="anchor" href="#_business_tasks"></a>4.2. Business tasks</h3>
<div class="paragraph">
<p>Serenity Screenplay uses layers of abstraction to make tests more readable and more maintainable. Serenity describes how a user interacts with an application in terms of three layers:
  * <strong>Goals</strong> that represent the high level business objectives;
  * <strong>Tasks</strong> that describe the high-level steps the user takes to achieve these goals; and
  * <strong>Actions</strong> that describe how the user interacts with the application to perform each step.</p>
</div>
<div class="paragraph">
<p>The <strong>Goal</strong> is represented by the test or scenario name, so <code>should_be_able_to_add_an_item_to_the_todo_list()</code> for this test).</p>
</div>
<div class="paragraph">
<p><strong>Tasks</strong> are represented by classes, such as <code>StartWith</code> and <code>AddATodoItem</code> in this test. We use readable class and method names that use domain language to make the tests as readable as possible.</p>
</div>
<div class="sect3">
<h4 id="_implementing_a_simple_business_task_class"><a class="anchor" href="#_implementing_a_simple_business_task_class"></a>4.2.1. Implementing a simple business task class</h4>
<div class="paragraph">
<p>Task classes are easy to write. Let&#8217;s start off with <code>StartWith</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">givenThat(justin).wasAbleTo(StartWith.anEmptyTodoList());</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a new class called <code>StartWith</code> in the <code>tasks</code> package, and make it implement the <code>net.serenitybdd.screenplay.Task</code> interface. This interface implements a single method, <code>performAs()</code>, which is where the action happens:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">StartWith</span> <span class="directive">implements</span> Task {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> &lt;T <span class="directive">extends</span> Actor&gt; <span class="type">void</span> performAs(T actor) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The actor methods <code>attemptsTo()</code> and <code>wasAbleTo()</code> take a list of <code>Task</code> objects and successively call the <code>performAs()</code> method on each object. We use static builder methods such as <code>StartWith.anEmptyTodoList()</code> to prepare the <code>Task</code> objects before they are executed, and pass in any variables the task may need. In this simple case, we don&#8217;t need to do anything special, so the <code>anEmptyTodoList()</code> static method just returns an instance the <code>StartWith</code> class. The only thing we do need to do is to add some Serenity instrumentation to the instance using the <code>net.serenitybdd.screenplay.Tasks.instrumented()</code> method, so that the task and underlying actions will appear in the Serenity reports:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">static</span> StartWith anEmptyTodoList() {
    <span class="keyword">return</span> instrumented(StartWith.class);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let&#8217;s come back to the <code>performAs()</code> method. An actor performs a task by either performing other smaller tasks or by interacting with the application in some way. In the case of the <code>StartWith</code> task, we just want to open the TodoMVC application. The implementation looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    TodoMvcApplicationHomePage todoMvcApplicationHomePage;              <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Override</span>
    <span class="annotation">@Step</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{0} starts with an empty todo list</span><span class="delimiter">&quot;</span></span>)                        <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="directive">public</span> &lt;T <span class="directive">extends</span> Actor&gt; <span class="type">void</span> performAs(T actor) {
        actor.attemptsTo(
                Open.browserOn().the(todoMvcApplicationHomePage)        <i class="conum" data-value="3"></i><b>(3)</b>
        );
    }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare a Page Object that Serenity will automatically instantiate</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>What should this step look like in the test reports ({0} will be replaced with the name of the actor)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The actor performs this task simply by opening the web browser on the TodoMVC application homepage.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>@Step</code> annotation tells Serenity how this step should be written in the test reports. The <code>{0}</code> expression represents the Actor variable that is passed into the <code>performAs()`</code> method. We will see later how we can personalize this message further.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_action_classes"><a class="anchor" href="#_using_action_classes"></a>4.2.2. Using Action classes</h4>
<div class="paragraph">
<p>We interact with the web application using the <code>Open</code> Action class. <code>Action`s classes are like `Task`s, except that they interact with the application directly and are called from within a task, not directly from the test. Serenity comes with a number of built-in UI-related interaction classes to help interact with web pages, including `Open</code>, <code>Click</code>, <code>Enter</code>, <code>Hit</code>, <code>Select</code> and <code>Scroll</code>. The <code>Open</code> class opens the actor&#8217;s browser to the URL of a particular page, as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">TodoMvcApplicationHomePage todoMvcApplicationHomePage;
...
    actor.attemptsTo(
        Open.browserOn().the(todoMvcApplicationHomePage)
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The page is represented by the <code>TodoMvcApplication</code> class. This is a simple Serenity Page Object, that at this stage needs nothing more than a <code>@DefaultUrl</code> annotation to indicate what URL should be used when we open the browser on this page:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@DefaultUrl</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">http://todomvc.com/examples/dojo/</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">TodoMvcApplicationHomePage</span> <span class="directive">extends</span> PageObject {
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_implementing_more_complicated_classes"><a class="anchor" href="#_implementing_more_complicated_classes"></a>4.2.3. Implementing more complicated classes</h4>
<div class="paragraph">
<p>We have now completed the implementation of the first step in the test. Let&#8217;s move on to the second:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">when(justin).attemptsTo(AddATodoItem.called(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, we have a task called <code>AddATodoItem</code>, which will add a todo item to our todo list. Create a class called <code>AddATodoItem</code>, once again in the <code>tasks</code> package, along the following lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">AddATodoItem</span> <span class="directive">implements</span> Task {

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">String</span> itemName;                          <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Step</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{0} adds an item called '#itemName'</span><span class="delimiter">&quot;</span></span>)            <i class="conum" data-value="2"></i><b>(2)</b>
    <span class="annotation">@Override</span>
    <span class="directive">public</span> &lt;T <span class="directive">extends</span> Actor&gt; <span class="type">void</span> performAs(T actor) {
        <span class="comment">// TODO</span>
    }

    <span class="directive">public</span> AddATodoItem(<span class="predefined-type">String</span> itemName) {                  <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="local-variable">this</span>.itemName = itemName;
    }

    <span class="directive">public</span> <span class="directive">static</span> Task called(<span class="predefined-type">String</span> itemName) {
        <span class="keyword">return</span> Instrumented.instanceOf(AddATodoItem.class)  <i class="conum" data-value="4"></i><b>(4)</b>
                           .withProperties(itemName);
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The itemName field stores the name of the todo item we want to add</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We can refer to member variables like itemName in the @Step annotation</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>We initialize the member variable in the constructor</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Create an instrumented instance of the AddATodoItem and pass the itemName argument to the AddATodoItem constructor</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This class shows a more flexible type of <code>Task</code>, where we use a static method call (such as <code>AddATodoItem.called("Feed the cat")</code>) to create an instance of the task with a particular value. We will be able to use this value in the <code>performAs()</code> implementation later on. We still need to instrument the class instance, but this time we use the <code>Instrumented.instanceOf()</code> method to pass a parameter to the constructor.</p>
</div>
<div class="paragraph">
<p>As in the <code>DisplayATodoListWith</code> task, all the interesting stuff happens in the <code>performAs()</code> method. Here, we lay out the actions that the actor needs to do to add a todo item to the list. Adding a todo item is relatively straight-forward. The actor types the name of the todo item into the input field and hits the Return key. In the <code>performAs()</code> method, we can write something very similar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Step</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{0} adds an item called '#itemName'</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@Override</span>
<span class="directive">public</span> &lt;T <span class="directive">extends</span> Actor&gt; <span class="type">void</span> performAs(T actor) {
    actor.attemptsTo(
            Enter.theValue(itemName).into(ToDoList.WHAT_NEEDS_TO_BE_DONE)
            .thenHit(Keys.RETURN)
    );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we are using one of the Serenity UI interaction classes (<code>Enter</code>) to enter a value into a given field, and then press the Return key. We do need to tell Serenity how to find the "What needs to be done" field, and we do this in the <code>ToDoList</code> class. The <code>ToDoList</code> class is responsible for knowing how to locate elements in the todo list, and looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">net.serenitybdd.screenplay.targets.Target</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">TheTodoList</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">Target</span> WHAT_NEEDS_TO_BE_DONE
        = <span class="predefined-type">Target</span>.the(<span class="string"><span class="delimiter">&quot;</span><span class="content">'What needs to be done?' field</span><span class="delimiter">&quot;</span></span>).locatedBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">#new-todo</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>Target</code> class is a convenient way to associate a user-readable text ("what needs to be done") with a WebDriver location strategy. This way, it is the text that appears in the reports, and not the CSS selector, which makes the intent of the test clearer.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_asking_questions"><a class="anchor" href="#_asking_questions"></a>4.3. Asking Questions</h3>
<div class="paragraph">
<p>The final step in our test is to check whether the todo item has actually appeared in the todo list. Once again, we consider the problem from the point of view of the actor - what would Justin expect to see, to know that the action has been successful? If we had to explain to a new tester what she should check for, we might say something like "you should see that the <em>Feed the cat</em> item now appears in the list of todo items", or "you should see that the todo items that are displayed now contains <em>Feed the cat</em>".</p>
</div>
<div class="paragraph">
<p>In Serenity, we use the <code>Actor</code>'s <code>should()</code> method to write something very similar:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">then(justin).should(seeThat(TheTodoItems.displayed()), hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>));   <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>should()</code> method takes a list of <code>Consequences</code> that we expect to be true. You create a <code>Consequence</code> using the <code>GivenWhenThen.seeThat</code> static method, which takes two parameters:
  - a <code>Question</code> about the state of the application, and
  - a Hamcrest matcher</p>
</div>
<div class="paragraph">
<p>We will see how to implement a <code>Question</code> shortly, but in a nutshell, the Question returns a value about the state of the application, and the Hamcrest matcher describes what we expect this value to be.</p>
</div>
<div class="paragraph">
<p>The full test now look something like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">net.serenitybdd.screenplay.GivenWhenThen</span>.*;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.hamcrest.Matchers.hasItems</span>;

<span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> should_be_able_to_add_an_item_to_the_todo_list() {

    givenThat(justin).wasAbleTo(StartWith.anEmptyTodoList());

    when(justin).attemptsTo(AddATodoItem.called(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>));

    then(justin).should(seeThat(TheTodoItems.displayed(), hasItems(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now all that remains is to implement the <code>TheTodoItems</code> class.</p>
</div>
<div class="sect3">
<h4 id="_implementing_a_question_class"><a class="anchor" href="#_implementing_a_question_class"></a>4.3.1. Implementing a question class</h4>
<div class="paragraph">
<p>A Question object answers a question about the state of the application, such as "what items are displayed in the todo list". Questions implement the parameterized <code>Question</code> interface. Create a new class called <code>TheTodoItems</code> in a <code>questions</code> package (next to the <code>tasks</code> package), along the following lines:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">TheTodoItems</span> <span class="directive">implements</span> Question&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;&gt; {       <i class="conum" data-value="1"></i><b>(1)</b>

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; answeredBy(Actor actor) {                   <i class="conum" data-value="2"></i><b>(2)</b>
        <span class="keyword">return</span> <span class="predefined-constant">null</span>; <span class="comment">// TODO</span>
    }

    <span class="directive">public</span> <span class="directive">static</span> Question&lt;<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt;&gt; displayed() {              <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="keyword">return</span> <span class="keyword">new</span> TheTodoItems();
    }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Question classes implement the Question interface</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>We return the answer to the question in the answeredBy() method</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A convenient static method used to create a new Question instance</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now all that remains is to implement the <code>answeredBy()</code> method. If we need to, we can access the actor&#8217;s browser directly by calling <code>BrowseTheWeb.as(actor)</code>, as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">List</span>&lt;WebElement&gt; itemLabels = BrowseTheWeb.as(actor)
                                          .findAll(By.cssSelector(<span class="string"><span class="delimiter">&quot;</span><span class="content">.view label</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>However Serenity also provides a set of classes that can help query a web page more smoothly, and take care of boiler-plate code such as type conversions and list processing.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; answeredBy(Actor actor) {
    <span class="keyword">return</span> Text.of(ToDoList.ITEMS)                  <i class="conum" data-value="1"></i><b>(1)</b>
            .viewedBy(actor)                        <i class="conum" data-value="2"></i><b>(2)</b>
            .asList();                              <i class="conum" data-value="3"></i><b>(3)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Return the list of text values from elements matching this locator target</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Using the actor&#8217;s browser</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>And and convert them to a list of Strings</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The last piece of the puzzle is to add the <code>ITEMS</code> locator target to our <code>ToDoList</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">ToDoList</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">Target</span> WHAT_NEEDS_TO_BE_DONE
        = <span class="predefined-type">Target</span>.the(<span class="string"><span class="delimiter">&quot;</span><span class="content">'What needs to be done?' field</span><span class="delimiter">&quot;</span></span>)
                .locatedBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">#new-todo</span><span class="delimiter">&quot;</span></span>);
    <span class="directive">public</span> <span class="directive">static</span> <span class="predefined-type">Target</span> ITEMS
        = <span class="predefined-type">Target</span>.the(<span class="string"><span class="delimiter">&quot;</span><span class="content">List of todo items</span><span class="delimiter">&quot;</span></span>)
                .locatedBy(<span class="string"><span class="delimiter">&quot;</span><span class="content">.view label</span><span class="delimiter">&quot;</span></span>);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>We now should have a fully working test that produces a nice readable report like this one:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-a-todo-item.png" alt="add a todo item">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reusing_tasks_adding_another_test"><a class="anchor" href="#_reusing_tasks_adding_another_test"></a>5. Reusing tasks - adding another test</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Serenity Screenplay is designed to make tasks easy to reuse, and to make individual tasks as stable and reliable as possible. One way we do this is to make the tasks as small and focused as possible (conforming to the <a href="http://www.oodesign.com/single-responsibility-principle.html">Single Responsibility Principle</a>).</p>
</div>
<div class="paragraph">
<p>Let&#8217;s see this idea in action. Suppose, for example, we wanted to add another test to check that we can add new todo items to an existing list. The test might look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Test</span>
<span class="directive">public</span> <span class="type">void</span> should_be_able_to_add_additional_todo_items() {

    givenThat(justin).wasAbleTo(
        StartWith.aTodoListContaining(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">take out the garbage</span><span class="delimiter">&quot;</span></span>)
    );

    when(justin).attemptsTo(AddATodoItem.called(<span class="string"><span class="delimiter">&quot;</span><span class="content">Walk the dog</span><span class="delimiter">&quot;</span></span>));

    then(justin).should(seeThat(TheTodoItems.displayed(),
                        contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">Feed the cat</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">take out the garbage</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">Walk the dog</span><span class="delimiter">&quot;</span></span>)));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, this test reuses the existing tasks like <code>Start</code> and <code>AddATodoItem</code> extensively: in fact, the only change we need to make is to add the <code>aTodoListContaining()</code> method to the Start class. We could make this change by modifying the logic in the current <code>StartWith</code> class, but this would add complexity to the existing class and risk affecting tests other than the one we are currently working on. An alternative approach would be to</p>
</div>
<div class="paragraph">
<p>Let&#8217;s start by duplicating the existing <code>StartWith</code> class to a class called <code>StartWithAnEmptyList</code>, and remove the static factory method from the new class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">StartWithAnEmptyList</span> <span class="directive">implements</span> Task {

    TodoMvcApplicationHomePage todoMvcApplicationHomePage;

    <span class="annotation">@Override</span>
    <span class="annotation">@Step</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{0} starts with an empty todo list</span><span class="delimiter">&quot;</span></span>)             <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> &lt;T <span class="directive">extends</span> Actor&gt; <span class="type">void</span> performAs(T actor) {
        actor.attemptsTo(
                Open.browserOn().the(todoMvcApplicationHomePage)
        );
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, refactor the <code>StartWith</code> so that the <code>anEmptyTodoList()</code> method returns an instrumented instance of the <code>StartWithAnEmptyList</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">StartWith</span> {

    <span class="directive">public</span> <span class="directive">static</span> StartWithAnEmptyList anEmptyTodoList() {
        <span class="keyword">return</span> instrumented(StartWithAnEmptyList.class);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The behavior of the first test should not have been altered by this change (though you should rerun it just to be sure).</p>
</div>
<div class="paragraph">
<p>Now let&#8217;s add the <code>aTodoListContaining()</code> method to the <code>StartWith</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">com.google.common.collect.Lists</span>;
<span class="keyword">import</span> <span class="include">net.serenitybdd.core.steps.Instrumented</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">net.serenitybdd.screenplay.Tasks.instrumented</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">StartWith</span> {

    <span class="directive">public</span> <span class="directive">static</span> StartWithAnEmptyList anEmptyTodoList() {
        <span class="keyword">return</span> instrumented(StartWithAnEmptyList.class);
    }

    <span class="directive">public</span> <span class="directive">static</span> StartWithATodoListContaining aTodoListContaining(<span class="predefined-type">String</span>... todos) {
        <span class="keyword">return</span> Instrumented.instanceOf(StartWithATodoListContaining.class)      <i class="conum" data-value="1"></i><b>(1)</b>
                           .withProperties(Lists.newArrayList(todos));          <i class="conum" data-value="2"></i><b>(2)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create an instrumented instance of the StartWithATodoListContaining class</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Pass in the list of todos as a parameter to the StartWithATodoListContaining constructor</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, all we need to do is to implement the <code>StartWithATodoListContaining</code> class. A simple implementation might look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">StartWithATodoListContaining</span> <span class="directive">implements</span> Task {

    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; todos;

    <span class="directive">public</span> StartWithATodoListContaining(<span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; todos) {
        <span class="local-variable">this</span>.todos = todos;
    }

    <span class="annotation">@Override</span>
    <span class="annotation">@Step</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">{0} starts with a todo list containing #todos</span><span class="delimiter">&quot;</span></span>)                      <i class="conum" data-value="1"></i><b>(1)</b>
    <span class="directive">public</span> &lt;T <span class="directive">extends</span> Actor&gt; <span class="type">void</span> performAs(T actor) {
        actor.attemptsTo(StartWith.anEmptyTodoList());                          <i class="conum" data-value="2"></i><b>(2)</b>
        todos.forEach(
                todoItem -&gt; actor.attemptsTo(AddATodoItem.called(todoItem))     <i class="conum" data-value="3"></i><b>(3)</b>
        );
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>We can refer to member variables in the @Step annotation using the hash sign</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Start with an empty todo list</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Add each specified item to the list</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This will produce a report like this:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/add-an-item-to-existing.png" alt="add an item to existing">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion"><a class="anchor" href="#_conclusion"></a>6. Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hopefully you will now know enough to get started with Serenity Screenplay, and understand both the mechanics of using the pattern, as well as some of the ideas behind it. Serenity Screenplay has many additional features that we didn&#8217;t have time to go into here: learn more on the <a href="http://serenity-bdd.info/#/documentation">Serenity BDD site</a> and in the <a href="http://serenity-bdd.info/docs/serenity/#_serenity_and_the_journey_pattern">User&#8217;s Manual</a>.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-02-24 08:19:23 AEDT
</div>
</div>
</body>
</html>